{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÑOMY</title>
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/index.css' %}">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
        }

        header {
            background-color: #f8f9fa;
            padding: 10px;
            z-index: 1000; /* Asegura que el header esté por encima del mapa */
            position: relative;
        }

        #hero {
            padding: 0;
            color: white;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            height: calc(100vh - 120px); /* Ajusta la altura del mapa dejando espacio para el header */
        }

        #mi_mapa {
            flex: 1;
            width: 100%;
            height: 100%; /* Ajusta la altura del mapa para que ocupe toda la sección */
        }

        #search-bar {
            text-align: center;
            margin-top: 0px; 
            width: 100%;
        }

        .search-input {
            padding: 10px;
            width: 100%;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 20px;
            text-align: center;
        }

        .favorite-star {
            font-size: 24px;
            cursor: pointer;
            color: gray;
        }
        .favorite-star.active {
            color: gold;
        }


        footer {
            text-align: center;
            padding: 20px;
            background-color: #f8f9fa;
            position: relative;
            z-index: 1000;
        }
    </style>
</head>

<body>
    <header>
        <div class="contenedor">
            <p class="logo">Ñomy</p>
            <nav>
                <a href="http://127.0.0.1:8000/">Home</a>
                <a href="#">Cuenta</a>
                <a href="#">Soporte</a>
            </nav>

            <div class="auth-buttons">
                <button onclick="window.location.href='http://127.0.0.1:8000/login/'">Iniciar Sesión</button>
                <button onclick="window.location.href='http://127.0.0.1:8000/register'">Registrarse</button>
                <a href="{% url 'logout' %}"><button type="button">Cerrar Sesión</button></a>
            </div>
        </div>
    </header>

    <section id="hero">
        <div id="mi_mapa"></div> <!-- Mapa dinámico dentro de la sección -->
        <div id="search-bar">
            <input type="text" placeholder="What do you want to eat today?" class="search-input">
        </div>
    </section>

    <footer>
        <p>© 2024 Ñomy. Todos los derechos reservados.</p>
    </footer>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <script>
        let map = L.map('mi_mapa').setView([6.24440, -75.57358], 14);

        L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map); 

        // Estructura marcador: L.marker([--Coordenadas--]).addTo(map).bindPopup("--Texto--").openPopup();
        //Lista de restaurantes con coordenadas, donde cada restaurante es un diccionario con las claves 'id', 'nombre', 'latitud' y 'longitud'
        var restaurante = [
            { id: 1, nombre: 'El Poblado Gourmet', latitud: 6.244203, longitud: -75.581212 },
            { id: 2, nombre: 'Cocina Paisa', latitud: 6.253040, longitud: -75.564573 },
            { id: 3, nombre: 'La Parrilla del Barrio', latitud: 6.268343, longitud: -75.566273 },
            { id: 4, nombre: 'Fonda Antioqueña', latitud: 6.256205, longitud: -75.590378 },
            { id: 5, nombre: 'El Rincón Paisa', latitud: 6.239555, longitud: -75.580307 },
            { id: 6, nombre: 'Delicias de Medellín', latitud: 6.248340, longitud: -75.558627 },
            { id: 7, nombre: 'Asados Doña Rosa', latitud: 6.244865, longitud: -75.574241 },
            { id: 8, nombre: 'La Estancia Campestre', latitud: 6.241251, longitud: -75.582703 },
            { id: 9, nombre: 'Brasa y Sabor', latitud: 6.230472, longitud: -75.575583 },
            { id: 10, nombre: 'Cocina de Montaña', latitud: 6.255349, longitud: -75.574356 },
            { id: 11, nombre: 'El Sabor de la Montaña', latitud: 6.275012, longitud: -75.576786 },
            { id: 12, nombre: 'Comidas Típicas El Poblado', latitud: 6.239112, longitud: -75.573167 },
            { id: 13, nombre: 'Los Sabores del Sur', latitud: 6.255967, longitud: -75.576000 },
            { id: 14, nombre: 'Parrilla La Candelaria', latitud: 6.238245, longitud: -75.583517 },
            { id: 15, nombre: 'Sazón Antioqueño', latitud: 6.249036, longitud: -75.577112 },
            { id: 16, nombre: 'Los Arrieros', latitud: 6.262923, longitud: -75.584564 },
            { id: 17, nombre: 'Restaurante La Terraza', latitud: 6.241095, longitud: -75.583709 },
            { id: 18, nombre: 'Parrillada del Norte', latitud: 6.244999, longitud: -75.582010 },
            { id: 19, nombre: 'Rancho Medellín', latitud: 6.266010, longitud: -75.568499 },
            { id: 20, nombre: 'Asados Don Juan', latitud: 6.250099, longitud: -75.571011 },
            { id: 21, nombre: 'El Mirador del Poblado', latitud: 6.261122, longitud: -75.587653 },
            { id: 22, nombre: 'Mesón de la Plaza', latitud: 6.264678, longitud: -75.580312 },
            { id: 23, nombre: 'Fonda Las Palmas', latitud: 6.259987, longitud: -75.575948 },
            { id: 24, nombre: 'Restaurante La Choza', latitud: 6.243520, longitud: -75.574678 },
            { id: 25, nombre: 'Antioqueñito Gourmet', latitud: 6.258344, longitud: -75.563123 },
            { id: 26, nombre: 'La Parrilla del Oriente', latitud: 6.270045, longitud: -75.578924 },
            { id: 27, nombre: 'Cocina Campesina', latitud: 6.250892, longitud: -75.567236 },
            { id: 28, nombre: 'Sabores del Campo', latitud: 6.247865, longitud: -75.576348 },
            { id: 29, nombre: 'El Rincón de Antioquia', latitud: 6.243399, longitud: -75.572321 },
            { id: 30, nombre: 'La Cocina de la Abuela', latitud: 6.254673, longitud: -75.565554 },
            { id: 31, nombre: 'Asados El Llanero', latitud: 6.249450, longitud: -75.576293 },
            { id: 32, nombre: 'Sabores de La Sierra', latitud: 6.253209, longitud: -75.578190 },
            { id: 33, nombre: 'Sazón Paisa', latitud: 6.248211, longitud: -75.580045 },
            { id: 34, nombre: 'La Fonda del Norte', latitud: 6.245788, longitud: -75.563456 },
            { id: 35, nombre: 'Parrilladas Los Arrieros', latitud: 6.270290, longitud: -75.582450 },
            { id: 36, nombre: 'El Sazón Tradicional', latitud: 6.240987, longitud: -75.577543 },
            { id: 37, nombre: 'El Fogón Paisa', latitud: 6.245112, longitud: -75.581789 },
            { id: 38, nombre: 'Delicias de la Montaña', latitud: 6.252667, longitud: -75.571290 },
            { id: 39, nombre: 'Asados La Gloria', latitud: 6.267098, longitud: -75.576423 },
            { id: 40, nombre: 'Restaurante Doña Clara', latitud: 6.261768, longitud: -75.577899 },
            { id: 41, nombre: 'Parrilladas Medellín', latitud: 6.247112, longitud: -75.583445 },
            { id: 42, nombre: 'Fonda La Herradura', latitud: 6.255567, longitud: -75.567890 },
            { id: 43, nombre: 'Sabores del Norte', latitud: 6.240999, longitud: -75.570675 },
            { id: 44, nombre: 'El Buen Paladar', latitud: 6.268532, longitud: -75.577312 },
            { id: 45, nombre: 'La Fonda Campestre', latitud: 6.258770, longitud: -75.578445 },
            { id: 46, nombre: 'El Parrillero del Sur', latitud: 6.252145, longitud: -75.569432 },
            { id: 47, nombre: 'El Fogón de la Abuela', latitud: 6.240045, longitud: -75.582345 },
            { id: 48, nombre: 'Fonda El Carriel', latitud: 6.266870, longitud: -75.584123 },
            { id: 49, nombre: 'Sabores y Asados', latitud: 6.261234, longitud: -75.579999 },
            { id: 50, nombre: 'Parrilladas del Valle', latitud: 6.245111, longitud: -75.566789 }
        ]

        // Crear el contenido del popup con la estrella de favorito
        function createPopupContent(nombre, id) {
            return `
                <div>
                    <h4>${nombre}</h4>
                    <span id="star-${id}" class="favorite-star" onclick="toggleFavorite(${id})">★</span>
                </div>
            `;
        }

        // Alternar el estado de favorito
        function toggleFavorite(id) {
            var star = document.getElementById(`star-${id}`);
            star.classList.toggle('active');
        }

        //Crear los marcadores de los restaurantes para mostrar en el mapa
        for (var i = 0; i < restaurante.length; i++) {
            L.marker([restaurante[i].latitud, restaurante[i].longitud]).addTo(map).bindPopup(createPopupContent(restaurante[i].nombre, restaurante[i].id));
        }
        

    </script>
</body>
</html>